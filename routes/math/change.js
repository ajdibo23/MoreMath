var express = require("express");
const User = require("../../models/user");
var router = express.Router();
const cookieParser = require("cookie-parser");
router.use(cookieParser());

router.post("/change", (req, res) => {
    res.send("ok")
    User.findOne({ session: req.cookies.current })
        .then(user => {
            if (user) {
                if (user.completed.length == user.progress.length) {
                    user.completed = []
                    if (user.math == "+") {
                        user.math = "-"
                        user.progress = ["0-0", "1-1", "2-2", "3-3", "4-4", "5-5", "6-6", "7-7", "8-8", "9-9", "1-0", "2-1", "3-2", "4-3", "5-4", "6-5", "7-6", "8-7", "9-8", "10-9", "2-0", "3-1", "4-2", "5-3", "6-4", "7-5", "8-6", "9-7", "10-8", "11-9", "3-0", "4-1", "5-2", "6-3", "7-4", "8-5", "9-6", "10-7", "11-8", "12-9", "4-0", "5-1", "6-2", "7-3", "8-4", "9-5", "10-6", "11-7", "12-8", "13-9", "5-0", "6-1", "7-2", "8-3", "9-4", "10-5", "11-6", "12-7", "13-8", "14-9", "6-0", "7-1", "8-2", "9-3", "10-4", "11-5", "12-6", "13-7", "14-8", "15-9", "7-0", "8-1", "9-2", "10-3", "11-4", "12-5", "13-6", "14-7", "15-8", "16-9", "8-0", "9-1", "10-2", "11-3", "12-4", "13-5", "14-6", "15-7", "16-8", "17-9", "9-0", "10-1", "11-2", "12-3", "13-4", "14-5", "15-6", "16-7", "17-8", "18-9"]
                    } else if (user.math == "-") {
                        user.math = "x"
                        user.progress = ["0x0", "0x1", "0x2", "0x3", "0x4", "0x5", "0x6", "0x7", "0x8", "0x9", "1x0", "1x1", "1x2", "1x3", "1x4", "1x5", "1x6", "1x7", "1x8", "1x9", "2x0", "2x1", "2x2", "2x3", "2x4", "2x5", "2x6", "2x7", "2x8", "2x9", "3x0", "3x1", "3x2", "3x3", "3x4", "3x5", "3x6", "3x7", "3x8", "3x9", "4x0", "4x1", "4x2", "4x3", "4x4", "4x5", "4x6", "4x7", "4x8", "4x9", "5x0", "5x1", "5x2", "5x3", "5x4", "5x5", "5x6", "5x7", "5x8", "5x9", "6x0", "6x1", "6x2", "6x3", "6x4", "6x5", "6x6", "6x7", "6x8", "6x9", "7x0", "7x1", "7x2", "7x3", "7x4", "7x5", "7x6", "7x7", "7x8", "7x9", "8x0", "8x1", "8x2", "8x3", "8x4", "8x5", "8x6", "8x7", "8x8", "8x9", "9x0", "9x1", "9x2", "9x3", "9x4", "9x5", "9x6", "9x7", "9x8", "9x9"]
                    } else if (user.math == "x") {
                        user.math = "÷"
                        user.progress = ["0÷1", "0÷2", "0÷3", "0÷4", "0÷5", "0÷6", "0÷7", "0÷8", "0÷9", "1÷1", "2÷2", "3÷3", "4÷4", "5÷5", "6÷6", "7÷7", "8÷8", "9÷9", "2÷1", "4÷2", "6÷3", "8÷4", "10÷5", "12÷6", "14÷7", "16÷8", "18÷9", "3÷1", "6÷2", "9÷3", "12÷4", "15÷5", "18÷6", "21÷7", "24÷8", "27÷9", "4÷1", "8÷2", "12÷3", "16÷4", "20÷5", "24÷6", "28÷7", "32÷8", "36÷9", "5÷1", "10÷2", "15÷3", "20÷4", "25÷5", "30÷6", "35÷7", "40÷8", "45÷9", "6÷1", "12÷2", "18÷3", "24÷4", "30÷5", "36÷6", "42÷7", "48÷8", "54÷9", "7÷1", "14÷2", "21÷3", "28÷4", "35÷5", "42÷6", "49÷7", "56÷8", "63÷9", "8÷1", "16÷2", "24÷3", "32÷4", "40÷5", "48÷6", "56÷7", "64÷8", "72÷9", "9÷1", "18÷2", "27÷3", "36÷4", "45÷5", "54÷6", "63÷7", "72÷8", "81÷9", "10÷1", "20÷2", "30÷3", "40÷4", "50÷5", "60÷6", "70÷7", "80÷8", "90÷9"]
                    } else if (user.math == "÷") {
                        //Then you beat this lol no but for real idk what to do after this.
                        user.math = "done"
                        user.progress = []
                    }
                    user.save();
                }
            }
        })
})

module.exports = router